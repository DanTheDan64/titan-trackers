[gd_scene load_steps=21 format=3 uid="uid://wj1eefn8jcyf"]

[ext_resource type="Texture2D" path="res://icon.svg" id="2_jp5t4"]
[ext_resource type="Script" path="res://Retical/retical.gd" id="2_p1cwd"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_8j0qs"]

[sub_resource type="Sky" id="Sky_jbla2"]
sky_material = SubResource("ProceduralSkyMaterial_8j0qs")

[sub_resource type="Environment" id="Environment_h8gqh"]
background_mode = 2
sky = SubResource("Sky_jbla2")

[sub_resource type="GDScript" id="GDScript_7gowk"]
script/source = "extends CharacterBody3D

#want to do:
#decide what states are wanted
#add states
#add helper func for non grapple states going to grapple
#
#
#

enum STATES {
	MOVING,
	SNEAKING,
	JUMPING,
	GRAPPLING,
	AIRBORN
}

var state: STATES = STATES.MOVING

var gravity: int = 30


#camera
@onready var cam: Object = $Camera3D
var sens: float = 0.2

#objects
@onready var movement_orienter: Object = $movement_orienter
@onready var retical = $UserRetical/retical

#movement
var max_speed: int = 8
var accell: int = 30
var jump_velocity: int = 6

@onready var input_dir: Vector2 = Input.get_vector(\"left\", \"right\", \"up\", \"down\")
@onready var direction: Vector3 = (cam.transform.basis * Vector3(input_dir.x, 0, input_dir.y)).normalized()
@onready var direction_flat: Vector3 = (movement_orienter.transform.basis * Vector3(input_dir.x, 0, input_dir.y)).normalized()

#grappling
var shoot_to = Vector3.ZERO

var held_pos: Vector3 = Vector3.ZERO
var coyote_time: float = 0.2
var grapple_range: int = 800
var pull_strength: int = 150


func _ready():
	Input.mouse_mode = Input.MOUSE_MODE_CAPTURED
	retical.DOT_COLOR = Color.BLUE
	

func _input(event):
	#camera movement
	if event is InputEventMouseMotion:
		cam.rotation_degrees.y += -event.relative.x * sens
		cam.rotation_degrees.x += -event.relative.y * sens
		cam.rotation_degrees.x = clamp(cam.rotation_degrees.x, -90, 90)
	elif InputEvent:
		if Input.is_action_pressed(\"escape\"):
			get_tree().quit()
		elif Input.is_action_just_pressed(\"jump\"):
			if not is_on_floor():
				if direction:
					velocity += direction * 250
				else:
					velocity += -cam.transform.basis.z * 250


func _physics_process(delta):
	#shoot ray out to see if it can grapple and where to grapple around
	var space_state = get_world_3d().direct_space_state
	
	var query = PhysicsRayQueryParameters3D.create(
	cam.global_position,
	cam.global_position + -cam.transform.basis.z * grapple_range)
	var result = space_state.intersect_ray(query)
	
	
	#setting grapple around and coyote time
	if result and state == 0:
		retical.DOT_COLOR = Color.RED
		held_pos = result.position
		$grapple_coyote_time.start(coyote_time)
	
	
	#gravity
	if not is_on_floor():
		velocity.y -= gravity * delta
		accell = 40
	else:
		accell = 90
	
	
	#jump/boost
	if Input.is_action_just_pressed(\"jump\"):
		if is_on_floor():
			velocity.y = jump_velocity
	
	match state:
		STATES.GRAPPLING: grappling(delta)
		_: moving(delta, result)
	
	
	move_and_slide()


func moving(delta, result):
	#thing for moving
	movement_orienter.rotation_degrees = Vector3(0, cam.rotation_degrees.y, 0)
	
	#movement
	input_dir = Input.get_vector(\"left\", \"right\", \"up\", \"down\")
	direction = (cam.transform.basis * Vector3(input_dir.x, 0, input_dir.y)).normalized()
	direction_flat = (movement_orienter.transform.basis * Vector3(input_dir.x, 0, input_dir.y)).normalized()
	
	velocity.x = move_toward(velocity.x, direction_flat.x * max_speed, accell * delta)
	velocity.z = move_toward(velocity.z, direction_flat.z * max_speed, accell * delta)
	
	
	#shoot grapple, go to grapple state
	if Input.is_action_just_pressed(\"fire_hook\"):
		retical.DOT_COLOR = Color.GREEN
		retical.queue_redraw()
		if held_pos:
			$grapple_coyote_time.stop()
			
			shoot_to = held_pos
			state = STATES.GRAPPLING
			return


func grappling(delta):
	velocity += (shoot_to - position).normalized() * delta * pull_strength
	
	velocity.x = move_toward(velocity.x, 0, accell * delta)
	velocity.z = move_toward(velocity.z, 0, accell * delta)
	
	if Input.is_action_just_released(\"fire_hook\"):
		retical.DOT_COLOR = Color.WHITE
		state = STATES.MOVING


func _on_grapple_coyote_time_timeout():
	retical.DOT_COLOR = Color.WHITE
	retical.queue_redraw()
	held_pos = Vector3.ZERO
"

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_kd6ts"]

[sub_resource type="CapsuleMesh" id="CapsuleMesh_lq231"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_jhqu7"]
albedo_texture = ExtResource("2_jp5t4")

[sub_resource type="BoxMesh" id="BoxMesh_qwlyu"]
size = Vector3(40, 5, 40)

[sub_resource type="BoxShape3D" id="BoxShape3D_xt1f4"]
size = Vector3(40, 5, 40)

[sub_resource type="BoxShape3D" id="BoxShape3D_4dq1x"]
size = Vector3(50, 5, 500)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_qmdgl"]
albedo_texture = ExtResource("2_jp5t4")

[sub_resource type="BoxMesh" id="BoxMesh_vqvrn"]
size = Vector3(50, 5, 500)

[sub_resource type="BoxMesh" id="BoxMesh_x84fl"]
size = Vector3(16, 40, 16)

[sub_resource type="BoxShape3D" id="BoxShape3D_uur3i"]
size = Vector3(16, 40, 16)

[sub_resource type="BoxMesh" id="BoxMesh_6jl8c"]
size = Vector3(50, 50, 50)

[sub_resource type="BoxShape3D" id="BoxShape3D_rl4ip"]
size = Vector3(50, 50, 50)

[sub_resource type="BoxMesh" id="BoxMesh_c0aq1"]
size = Vector3(10, 5, 1500)

[sub_resource type="BoxShape3D" id="BoxShape3D_46qcd"]
size = Vector3(10, 5, 1500)

[node name="Node3D" type="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="SpotLight3D" type="SpotLight3D" parent="."]
transform = Transform3D(0.822543, -0.298169, 0.484271, 0.0074801, 0.857134, 0.515039, -0.568654, -0.420019, 0.70726, 247.732, 193.805, 113.923)
light_energy = 300.0
spot_range = 4096.0

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_h8gqh")

[node name="CharacterBody3D" type="CharacterBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 132, 209)
script = SubResource("GDScript_7gowk")

[node name="CollisionShape3D" type="CollisionShape3D" parent="CharacterBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)
shape = SubResource("CapsuleShape3D_kd6ts")

[node name="MeshInstance3D" type="MeshInstance3D" parent="CharacterBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)
mesh = SubResource("CapsuleMesh_lq231")

[node name="Camera3D" type="Camera3D" parent="CharacterBody3D"]
transform = Transform3D(0.587785, 0, 0.809017, 0, 1, 0, -0.809017, 0, 0.587785, 0, 0.106232, 0)

[node name="movement_orienter" type="Marker3D" parent="CharacterBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="grapple_coyote_time" type="Timer" parent="CharacterBody3D"]
one_shot = true

[node name="state_controller" type="Node" parent="CharacterBody3D"]

[node name="moving" type="Node" parent="CharacterBody3D/state_controller"]

[node name="grappling" type="Node" parent="CharacterBody3D/state_controller"]

[node name="UserRetical" type="Control" parent="CharacterBody3D"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 1

[node name="retical" type="CenterContainer" parent="CharacterBody3D/UserRetical"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("2_p1cwd")
DOT_RADIUS = 3.0

[node name="Top" type="Line2D" parent="CharacterBody3D/UserRetical/retical"]
points = PackedVector2Array(0, -5, 0, -15)
width = 2.0

[node name="Right" type="Line2D" parent="CharacterBody3D/UserRetical/retical"]
points = PackedVector2Array(5, 0, 15, 0)
width = 2.0

[node name="Bottom" type="Line2D" parent="CharacterBody3D/UserRetical/retical"]
points = PackedVector2Array(0, 5, 0, 15)
width = 2.0

[node name="Left" type="Line2D" parent="CharacterBody3D/UserRetical/retical"]
points = PackedVector2Array(-5, 0, -15, 0)
width = 2.0

[node name="terrain" type="Node" parent="."]

[node name="StaticBody3D71" type="StaticBody3D" parent="terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 127, 211)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D71"]
material_override = SubResource("StandardMaterial3D_jhqu7")
mesh = SubResource("BoxMesh_qwlyu")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D71"]
shape = SubResource("BoxShape3D_xt1f4")

[node name="StaticBody3D72" type="StaticBody3D" parent="terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 114, -1958)
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D72"]
shape = SubResource("BoxShape3D_4dq1x")

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D72"]
material_override = SubResource("StandardMaterial3D_qmdgl")
mesh = SubResource("BoxMesh_vqvrn")

[node name="StaticBody3D3" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.866025, -0.5, 0, 0.5, 0.866025, 0, 0, 0, 1, 64, 151, -115)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D3"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D3"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D4" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.258819, -0.965926, 0, 0.965926, 0.258819, 0, 0, 0, 1, -33, 192, -281)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D4"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D4"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D12" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.258819, -0.965926, 0, 0.965926, 0.258819, 0, 0, 0, 1, -33, 215, -9)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D12"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D12"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D7" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.866025, -0.5, 0, 0.5, 0.866025, 0, 0, 0, 1, 64, 371, -1061)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D7"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D7"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D8" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.258819, -0.965926, 0, 0.965926, 0.258819, 0, 0, 0, 1, -33, 327, -727)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D8"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D8"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D5" type="StaticBody3D" parent="terrain"]
transform = Transform3D(-0.433013, 0.25, 0.866026, 0.5, 0.866025, 0, -0.75, 0.433013, -0.5, 100.593, 151, -634.603)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D5"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D5"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D6" type="StaticBody3D" parent="terrain"]
transform = Transform3D(-0.12941, 0.482963, 0.866025, 0.965926, 0.258819, 0, -0.224144, 0.836516, -0.5, 5.33252, 192, -467.598)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D6"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D6"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D13" type="StaticBody3D" parent="terrain"]
transform = Transform3D(-0.12941, 0.482963, 0.866025, 0.965926, 0.258819, 0, -0.224144, 0.836516, -0.5, 287.657, 163, -630.598)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D13"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D13"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D9" type="StaticBody3D" parent="terrain"]
transform = Transform3D(-0.433013, 0.25, 0.866026, 0.5, 0.866025, 0, -0.75, 0.433013, -0.5, -718.667, 371, -161.603)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D9"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D9"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D10" type="StaticBody3D" parent="terrain"]
transform = Transform3D(-0.12941, 0.482963, 0.866025, 0.965926, 0.258819, 0, -0.224144, 0.836516, -0.5, -380.915, 327, -244.598)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D10"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D10"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D11" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.433012, -0.25, -0.866026, 0.5, 0.866025, 0, 0.75, -0.433013, 0.5, -534.743, 151, 209.656)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D11"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D11"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D14" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.129409, -0.482963, -0.866025, 0.965926, 0.258819, 0, 0.224144, -0.836516, 0.5, -439.483, 192, 42.6511)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D14"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D14"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D15" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.129409, -0.482963, -0.866025, 0.965926, 0.258819, 0, 0.224144, -0.836516, 0.5, -721.807, 163, 205.651)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D15"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D15"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D16" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.433012, -0.25, -0.866026, 0.5, 0.866025, 0, 0.75, -0.433013, 0.5, 284.517, 371, -263.344)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D16"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D16"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D17" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.129409, -0.482963, -0.866025, 0.965926, 0.258819, 0, 0.224144, -0.836516, 0.5, 370.765, 486, 94.651)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D17"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D17"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D18" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.433012, -0.25, 0.866025, 0.5, 0.866025, -1.29048e-08, -0.75, 0.433013, 0.5, -66.4572, 151, -18.4555)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D18"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D18"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D19" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.129409, -0.482963, 0.866025, 0.965926, 0.258819, 7.45058e-09, -0.224144, 0.836516, 0.5, -258.717, 192, -17.451)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D19"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D19"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D20" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.129409, -0.482963, 0.866025, 0.965926, 0.258819, 7.45058e-09, -0.224144, 0.836516, 0.5, 23.6068, 163, 94.549)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D20"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D20"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D21" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.433012, -0.25, 0.866025, 0.5, 0.866025, -1.29048e-08, -0.75, 0.433013, 0.5, -885.717, 371, -491.456)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D21"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D21"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D23" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.866025, -0.5, 0, 0.5, 0.866025, 0, 0, 0, 1, -412, 371, -1061)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D23"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D23"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D24" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.258819, -0.965926, 0, 0.965926, 0.258819, 0, 0, 0, 1, -509, 327, -727)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D24"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D24"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D25" type="StaticBody3D" parent="terrain"]
transform = Transform3D(-0.433013, 0.25, 0.866026, 0.5, 0.866025, 0, -0.75, 0.433013, -0.5, -375.407, 151, -634.603)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D25"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D25"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D26" type="StaticBody3D" parent="terrain"]
transform = Transform3D(-0.12941, 0.482963, 0.866025, 0.965926, 0.258819, 0, -0.224144, 0.836516, -0.5, -188.343, 163, -630.598)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D26"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D26"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D27" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.433012, -0.25, 0.866025, 0.5, 0.866025, -1.29048e-08, -0.75, 0.433013, 0.5, -1361.72, 371, -491.456)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D27"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D27"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D22" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.129409, -0.482963, 0.866025, 0.965926, 0.258819, 7.45058e-09, -0.224144, 0.836516, 0.5, -644.965, 327, -240.451)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D22"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D22"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D28" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.612372, -0.353553, -0.707107, 0.5, 0.866025, 0, 0.612372, -0.353553, 0.707107, -191.79, 526, 58.0783)
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D28"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D29" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.183013, -0.683013, -0.707107, 0.965926, 0.258819, 0, 0.183013, -0.683013, 0.707107, -142.999, 567, -127.891)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D29"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D29"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D30" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.183013, -0.683013, -0.707107, 0.965926, 0.258819, 0, 0.183013, -0.683013, 0.707107, -373.516, 538, 102.626)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D30"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D30"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D31" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.612372, -0.353553, -0.707107, 0.5, 0.866025, 0, 0.612372, -0.353553, 0.707107, 477.133, 746, -610.845)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D31"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D31"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D32" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.183013, -0.683013, -0.707107, 0.965926, 0.258819, 0, 0.183013, -0.683013, 0.707107, 172.37, 702, -443.26)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D32"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D32"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D33" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.224144, -0.12941, 0.965926, 0.5, 0.866025, -1.49012e-08, -0.836516, 0.482963, 0.258819, 201.5, 526, -283.461)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D33"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D33"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D34" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.0669871, -0.25, 0.965925, 0.965926, 0.258819, 1.29048e-08, -0.25, 0.933012, 0.258819, 16.0506, 567, -232.73)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D34"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D34"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D35" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.0669871, -0.25, 0.965925, 0.965926, 0.258819, 1.29048e-08, -0.25, 0.933012, 0.258819, 330.943, 538, -148.355)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D35"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D35"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D36" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.224144, -0.12941, 0.965926, 0.5, 0.866025, -1.49012e-08, -0.836516, 0.482963, 0.258819, -712.266, 746, -528.304)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D36"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D36"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D37" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.0669871, -0.25, 0.965925, 0.965926, 0.258819, 1.29048e-08, -0.25, 0.933012, 0.258819, -414.752, 702, -348.164)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D37"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D37"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D38" type="StaticBody3D" parent="terrain"]
transform = Transform3D(-0.224144, 0.12941, -0.965926, 0.5, 0.866025, 0, 0.836516, -0.482963, -0.258819, -844.731, 526, -135.73)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D38"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D38"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D39" type="StaticBody3D" parent="terrain"]
transform = Transform3D(-0.0669878, 0.25, -0.965925, 0.965926, 0.258819, 5.4542e-09, 0.25, -0.933012, -0.258819, -659.282, 567, -186.462)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D39"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D39"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D40" type="StaticBody3D" parent="terrain"]
transform = Transform3D(-0.0669878, 0.25, -0.965925, 0.965926, 0.258819, 5.4542e-09, 0.25, -0.933012, -0.258819, -974.174, 538, -270.837)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D40"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D40"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D41" type="StaticBody3D" parent="terrain"]
transform = Transform3D(-0.224144, 0.12941, -0.965926, 0.5, 0.866025, 0, 0.836516, -0.482963, -0.258819, 69.0345, 746, 109.112)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D41"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D41"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D42" type="StaticBody3D" parent="terrain"]
transform = Transform3D(-0.0669878, 0.25, -0.965925, 0.965926, 0.258819, 5.4542e-09, 0.25, -0.933012, -0.258819, -228.479, 702, -71.0283)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D42"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D42"]
shape = SubResource("BoxShape3D_uur3i")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="terrain/StaticBody3D42"]
transform = Transform3D(0.595035, 0.771811, 0.224144, -0.288848, 0.465625, -0.836517, -0.75, 0.433012, 0.5, -140.184, -156.838, -68.8541)
mesh = SubResource("BoxMesh_x84fl")
skeleton = NodePath("../../StaticBody3D28")

[node name="StaticBody3D43" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.836516, -0.482963, 0.258819, 0.5, 0.866025, 1.49011e-08, -0.224144, 0.12941, 0.965925, -352.304, 526, 34.0984)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D43"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D43"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D44" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.25, -0.933012, 0.258819, 0.965926, 0.258819, 9.44696e-09, -0.0669878, 0.25, 0.965925, -488.963, 567, -101.14)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D44"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D44"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D45" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.25, -0.933012, 0.258819, 0.965926, 0.258819, 9.44696e-09, -0.0669878, 0.25, 0.965925, -404.588, 538, 213.752)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D45"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D45"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D46" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.836516, -0.482963, 0.258819, 0.5, 0.866025, 1.49011e-08, -0.224144, 0.12941, 0.965925, -597.146, 746, -879.668)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D46"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D46"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D47" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.612372, -0.353553, -0.707107, 0.5, 0.866025, 0, 0.612372, -0.353553, 0.707107, 140.551, 746, -947.427)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D47"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D47"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D48" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.183013, -0.683013, -0.707107, 0.965926, 0.258819, 0, 0.183013, -0.683013, 0.707107, -164.212, 702, -779.843)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D48"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D48"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D49" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.224144, -0.12941, 0.965926, 0.5, 0.866025, -1.49012e-08, -0.836516, 0.482963, 0.258819, -135.083, 526, -620.044)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D49"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D49"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D50" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.0669871, -0.25, 0.965925, 0.965926, 0.258819, 1.29048e-08, -0.25, 0.933012, 0.258819, -5.64026, 538, -484.938)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D50"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D50"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D51" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.836516, -0.482963, 0.258819, 0.5, 0.866025, 1.49011e-08, -0.224144, 0.12941, 0.965925, -933.731, 746, -1216.25)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D51"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D51"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D52" type="StaticBody3D" parent="terrain"]
transform = Transform3D(0.25, -0.933012, 0.258819, 0.965926, 0.258819, 9.44696e-09, -0.0669878, 0.25, 0.965925, -604.396, 702, -531.943)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D52"]
mesh = SubResource("BoxMesh_x84fl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D52"]
shape = SubResource("BoxShape3D_uur3i")

[node name="StaticBody3D" type="StaticBody3D" parent="terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 539, 217, 0)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D"]
mesh = SubResource("BoxMesh_6jl8c")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D"]
shape = SubResource("BoxShape3D_rl4ip")

[node name="StaticBody3D2" type="StaticBody3D" parent="terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1057, 401, 0)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D2"]
mesh = SubResource("BoxMesh_6jl8c")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D2"]
shape = SubResource("BoxShape3D_rl4ip")

[node name="StaticBody3D53" type="StaticBody3D" parent="terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1692, 458, 314)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D53"]
mesh = SubResource("BoxMesh_6jl8c")
skeleton = NodePath("../../StaticBody3D53")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D53"]
shape = SubResource("BoxShape3D_rl4ip")

[node name="StaticBody3D54" type="StaticBody3D" parent="terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2210, 786, 850)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D54"]
mesh = SubResource("BoxMesh_6jl8c")
skeleton = NodePath("../../StaticBody3D53")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D54"]
shape = SubResource("BoxShape3D_rl4ip")

[node name="StaticBody3D55" type="StaticBody3D" parent="terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 23, 188, 1029)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D55"]
mesh = SubResource("BoxMesh_c0aq1")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D55"]
shape = SubResource("BoxShape3D_46qcd")

[node name="StaticBody3D56" type="StaticBody3D" parent="terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -21, 188, 1029)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="terrain/StaticBody3D56"]
mesh = SubResource("BoxMesh_c0aq1")

[node name="CollisionShape3D" type="CollisionShape3D" parent="terrain/StaticBody3D56"]
shape = SubResource("BoxShape3D_46qcd")

[connection signal="timeout" from="CharacterBody3D/grapple_coyote_time" to="CharacterBody3D" method="_on_grapple_coyote_time_timeout"]
